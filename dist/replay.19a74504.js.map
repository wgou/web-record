{"version":3,"sources":["src/helper/replay.ts","src/pages/replay/index.tsx"],"names":[],"mappings":"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","file":"replay.19a74504.js","sourceRoot":"..","sourcesContent":["import { EActionType, IAction, ISerializationDom } from './publicType';\r\nimport virtualDom from './virtualDom';\r\n\r\nclass ReplayRecord extends virtualDom {\r\n  public initDom: ISerializationDom | undefined;\r\n  public actionList: IAction[] = [];\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * 初始化某个录屏\r\n   * @param initDom 初始的序列化dom\r\n   * @param actionList 动作记录\r\n   */\r\n  init(initDom: ISerializationDom, actionList: IAction[]) {\r\n    console.log('replay init');\r\n    this.initDom = initDom;\r\n    this.actionList = actionList;\r\n    this.createIframe().then(() => {\r\n      this.replay();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 重置信息 等待新的录屏回放\r\n   */\r\n  reset() {\r\n    this.id = 1;\r\n    this.idMap.clear();\r\n    this.initDom = undefined;\r\n    this.actionList = [];\r\n    // 清除iframe\r\n    const replayIframe = document.querySelector('#replay-iframe');\r\n    replayIframe && document.body.removeChild(replayIframe);\r\n  }\r\n\r\n  /**\r\n   * 创建iframe 作为容器\r\n   */\r\n  createIframe() {\r\n    return new Promise((re, rj) => {\r\n      let iframe = document.createElement('iframe');\r\n      iframe.setAttribute('sandbox', 'allow-same-origin');\r\n      iframe.setAttribute('scrolling', 'no');\r\n      iframe.setAttribute('style', 'border:0;');\r\n      iframe.setAttribute('id', 'replay-iframe');\r\n      iframe.width = `${window.innerWidth - 8}px`;\r\n      iframe.height = `${window.innerHeight}px`;\r\n      iframe.onload = () => {\r\n        const doc = iframe.contentDocument!,\r\n          root = doc.documentElement,\r\n          html = this.deSerialization(this.initDom!); //反序列化\r\n        root.style.opacity = '0';\r\n        //根元素属性附加\r\n        for (const { name, value } of Array.from(html.attributes)) {\r\n          root.setAttribute(name, value);\r\n        }\r\n        root.removeChild(root.firstElementChild!); //移除head\r\n        root.removeChild(root.firstElementChild!); //移除body\r\n        Array.from(html.children).forEach((child) => {\r\n          root.appendChild(child);\r\n        });\r\n        //添加自定义鼠标\r\n        const mouse = document.createElement('div');\r\n        mouse.className = 'app-mouse';\r\n        doc.body.appendChild(mouse);\r\n        setTimeout(() => {\r\n          root.style.opacity = '1';\r\n        }, 50);\r\n        re(1);\r\n      };\r\n      document.body.appendChild(iframe);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 回放\r\n   */\r\n  replay() {\r\n    if (this.actionList.length == 0) return;\r\n    console.log('__________replay_________');\r\n    console.log('all actionList', this.actionList);\r\n    let appMouse: HTMLElement | null = null;\r\n    const timeOffset = 16.7; //一帧的时间间隔大概为16.7ms\r\n    let startTime = this.actionList[0].timestamp - 1000; //开始时间戳 减一秒是缓冲一下\r\n\r\n    const state = () => {\r\n      const action = this.actionList[0];\r\n      let target = this.idMap.get(action.id);\r\n      if (!target) {\r\n        //取不到的元素 直接停止\r\n        console.error(`dont's have this element`, action.id);\r\n        return;\r\n      }\r\n      let element = target as Element;\r\n      if (startTime >= action.timestamp) {\r\n        console.log('=== current action', action, 'left:', this.actionList.length);\r\n        this.actionList.shift();\r\n        switch (action.type) {\r\n          //属性\r\n          case EActionType.ACTION_TYPE_ATTRIBUTE:\r\n            console.log('action>>>>>> [attributes]', 'targetEl', element);\r\n            for (const name in action.attributes) {\r\n              //更新属性\r\n              element.setAttribute(name, action.attributes[name]);\r\n            }\r\n            break;\r\n\r\n          //节点修改\r\n          case EActionType.ACTION_TYPE_ELEMENT:\r\n            console.log('action>>>>>>> [element]', 'targetEl', element);\r\n            //添加节点\r\n            action.addedNodes?.forEach((ch) => {\r\n              let el = this.createElement(ch);\r\n              console.log('++add node', ch, el);\r\n              element.appendChild(el);\r\n            });\r\n            //删除节点\r\n            action.removedNodes?.forEach((id) => {\r\n              let el = this.idMap.get(id) as Element;\r\n              console.log('--remove node', id, el);\r\n              element.removeChild(el);\r\n            });\r\n            break;\r\n\r\n          //文本变化\r\n          case EActionType.ACTION_TYPE_TEXT:\r\n            console.log('action>>>>>>> [text]', 'targetEl', element);\r\n            element.textContent = action.newText!;\r\n            break;\r\n\r\n          //鼠标\r\n          case EActionType.ACTION_TYPE_MOUSE:\r\n            console.log('action>>>>>>> [mouse]', 'targetEl', element);\r\n            if (!appMouse) {\r\n              appMouse = element.querySelector('.app-mouse');\r\n              // 延时是为了防止鼠标从页面左侧移过来(有transition)\r\n              setTimeout(() => {\r\n                appMouse?.classList.add('active');\r\n              }, 50);\r\n            }\r\n            appMouse!.style.transform = `translate(${action.pageX}px,${action.pageY}px)`;\r\n            break;\r\n\r\n          //输入框\r\n          case EActionType.ACTION_TYPE_INPUT:\r\n            console.log('action>>>>>>> [input]', 'targetEl', element);\r\n            (element as HTMLInputElement).value = action.inputValue!;\r\n            break;\r\n        }\r\n      }\r\n      startTime += timeOffset; //最大程度的模拟真实的时间差\r\n      if (this.actionList.length > 0) {\r\n        //当还有动作时，继续调用requestAnimationFrame()\r\n        requestAnimationFrame(state);\r\n      } else {\r\n        // 没有动作了 播放结束\r\n        console.log('replay end.');\r\n      }\r\n    };\r\n\r\n    state();\r\n  }\r\n}\r\n\r\nexport default ReplayRecord;\r\n","import React, { useState } from 'react';\r\nimport { IRecordInfo } from '/src/helper/publicType';\r\nimport './index.less';\r\nimport ReplayRecord from '/src/helper/replay';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst Replay = () => {\r\n  const [showClose, setShowClose] = useState(false);\r\n  const replayRecord = new ReplayRecord();\r\n  const recordList: IRecordInfo[] = JSON.parse(window.localStorage.getItem('recordList') || '[]');\r\n  const history = useHistory();\r\n\r\n  // 播放指定录屏记录\r\n  const handleReplayRecord = (it: IRecordInfo) => {\r\n    console.log(it);\r\n    replayRecord.init(it.initDom, it.actionList);\r\n    setShowClose(true);\r\n  };\r\n\r\n  // 关闭当前录屏播放\r\n  const handleCloseCurrentReplay = () => {\r\n    setShowClose(false);\r\n    replayRecord.reset();\r\n  };\r\n\r\n  //去回放页面\r\n  const goRecordPage = () => {\r\n    history.push('/')\r\n  };\r\n\r\n  return (\r\n    <div className='replay-page'>\r\n      <header className='font-size-32 text-center pt-24 mb-24'>web record replay</header>\r\n      {showClose ? (\r\n        <div className='close-current-replay flex-center' onClick={handleCloseCurrentReplay}>\r\n          close\r\n        </div>\r\n      ) : null}\r\n      <div className='flex-center'>\r\n        <button className='theme-btn' onClick={goRecordPage}>\r\n          Go Record\r\n        </button>\r\n      </div>\r\n      <ul className='mt-24 flex-cl replay-cont'>\r\n        {recordList.reverse().map((it) => (\r\n          <li\r\n            className='flex-center mb-24 replay-item'\r\n            key={it.time}\r\n            onClick={() => handleReplayRecord(it)}>\r\n            {it.time}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Replay;\r\n"]}